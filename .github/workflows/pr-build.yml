name: PR Build Check

on:
  pull_request:
    branches:
      - main
      - develop
    paths:
      - 'src/**'
      - '*.sln'
      - '*.csproj'
      - '.github/workflows/pr-build.yml'

jobs:
  build:
    name: Build and Test
    runs-on: ubuntu-latest

    steps:
    - name: ğŸ“¥ Checkout code
      uses: actions/checkout@v4

    - name: ğŸ”§ Setup .NET
      uses: actions/setup-dotnet@v4
      with:
        dotnet-version: '9.0.x'

    - name: ğŸ“¦ Restore dependencies
      run: dotnet restore TradingSystem.sln

    - name: ğŸ—ï¸ Build solution
      run: dotnet build TradingSystem.sln --configuration Release --no-restore

    - name: âœ… Build status
      if: success()
      run: echo "âœ… Build succeeded! PR can be merged."

    - name: âŒ Build failed
      if: failure()
      run: |
        echo "âŒ Build failed! Please fix the errors before merging."
        exit 1

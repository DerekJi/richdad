我新制定了一套基于对15分钟图形的黄金或白银CFD交易策略，需要先回测，以了解胜率。回测过程中可能会调整一些细节或参数，以取得比较好的结果。策略确定后，我需要让这套系统能够定期从OANDA的API获取15分钟图的数据，如果触发开仓条件，希望能给我发短信、邮件，或者OANDA APP的通知（有可能的话）。下面我们先做第一步，帮我搭建一套dotnet代码，可以读取当前目录下的csv历史数据（支持读取XAUUSD和XAGUSD的M15/M5级别数据），并按交易策略进行回测。

当前数据文件：
- XAUUSD.a_M15_202110201715_202601140200.csv（黄金15分钟，2021-2026）
- XAUUSD.a_M5_202408160410_202512312355.csv（黄金5分钟，2024-2025）
- XAGUSD.a_M15_202503050145_202601140200.csv（白银15分钟，2025-2026）
- XAGUSD.a_M5_202503050155_202512312355.csv（白银5分钟，2025）

代码架构方面，分为3层
1、数据层
  可能有多个部分
  1）读取csv或者将来读取API，对业务层的接口应有一致性，避免重大改动；
  2）回测数据或实盘操作数据，需要保留。
  3）回测阶段可能会频繁调整参数，这些参数可能需要保存，对应的测试数据也需要保留，并方便调阅
  4）考虑使用数据库，目前本地有Cosmos数据库，连接字符串为:
AccountEndpoint=https://localhost:8081/;AccountKey=C2y6yDjf5/R+ob0N8A7Cgv30VRDJIWEHLM+4QDU5DE2nQ9nDuVTqobD4b8mGGyPMbIZnqyMsEcaGQy67XIw/Jw==

2、业务层
  执行回测或者未来实盘操作的核心部分。
  1）应考虑到未来会增加更多的交易策略，应提供统一的接口给应用层。即使在交易概念上是同一套策略，可能因为部分内容不同，技术上代码也会变成不同的策略，应预留弹性并考虑命名规则。
  2）建议使用TA-Libs的第三方库，省得自己编写指标。

  内部建议分成三份
  Backtest（专供回测使用）    Live (专供实盘操作)
       |                            |
       |                            |
       ------------------------------
                   |
              Strategies（实现各种交易策略，甚至可以考虑每个策略分成一个project）
                   |
                 Core


3、应用层
  1）需要分为console版和Web版。 Console版主要用于快速回测，Web版则会用于精细调参。
  2）可能需要更细致的分层，以便对Console和Web版提供相同的测试报告。
  3）回测这部分应提供配置选择，比如，使用什么策略（目前只有一种），对不同品种的不同参数设置。
  4）可能需要程序自动调整参数进行回测。因为很多参数可能都需要调整，以便对比效果。手动太麻烦了


总体架构大致如下：

应用层    Console     Web     Console/Background Job              Web
            |          |         |                                |
            ------------         ----------------------------------
              |                            |

业务层     Backtest（专供回测使用）    Live (专供实盘操作)
              |                            |
              |                            |
              ------------------------------
                          |
                      Strategies（实现各种交易策略，甚至可以考虑每个策略分成一个project）
                          |
                        Core

              --------------------------
数据层         |                       |
             Csv                    Cosmos

回测指标请提供
* 总交易数、胜率、收益率、平均持仓时间、最大连续盈利单数、最大连续亏损单数
* 每周交易次数、胜率、收益率、平均持仓时间、最大连续盈利单数、最大连续亏损单数
* 每个月（自然月）交易次数、胜率、盈亏额、平均持仓时间、最大连续盈利单数、最大连续亏损单数
* 每年（自然年）交易次数、胜率、盈亏额、平均持仓时间、最大连续盈利单数、最大连续亏损单数
* 平均每个月开仓单数
* 盈亏比，我已经固定了，应该不用吧
* 最大回撤及时间
* 每笔交易的详细记录，包括：开仓时间，开仓点位，止损位（止损点差），止盈位（止盈点差），收益率（收益额），平仓时间，平仓点位，平仓原因（SL or TP)
* 收益曲线图形


如果有不清楚的地方，可以先问我
